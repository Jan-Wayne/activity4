<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Password Validation</title>
  <style>
    :root { --bg:#f4f6f9; --card:#fff; --text:#111; --muted:#6b7280; --primary:#0d6efd; --primary-hover:#0b5ed7; --ok:#16a34a; --err:#dc2626; }
    * { box-sizing: border-box; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background: var(--bg); margin: 0; min-height: 100vh; display: grid; place-items: center; color: var(--text); }
    .container { width: 100%; max-width: 380px; background: var(--card); padding: 28px; border-radius: 16px; box-shadow: 0 12px 30px rgba(0,0,0,.08); }
    h2 { margin: 0 0 18px; text-align: center; }
    label { display: block; margin: 12px 0 6px; font-weight: 600; }
    input[type="password"] { width: 100%; padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 10px; outline: none; transition: border-color .15s ease; }
    input[type="password"]:focus { border-color: var(--primary); }
    .row { position: relative; }
    .toggle { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); font-size: 12px; color: var(--muted); cursor: pointer; user-select: none; }
    button { width: 100%; padding: 12px; margin-top: 6px; background: var(--primary); color: #fff; border: none; border-radius: 10px; font-weight: 700; cursor: pointer; transition: background .15s ease; }
    button:hover { background: var(--primary-hover); }
    #message { margin-top: 12px; text-align: center; font-weight: 700; }
    .success { color: var(--ok); }
    .error { color: var(--err); }
    .hints { font-size: 12px; color: var(--muted); margin-top: 6px; line-height: 1.4; }
    ul.rules { margin: 10px 0 0 18px; padding: 0; }
    ul.rules li { margin: 4px 0; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 6px 12px; align-items: center; margin-top: 10px; font-size: 12px; }
    .chip { padding: 6px 8px; border-radius: 999px; border: 1px solid #e5e7eb; text-align: center; }
    .ok { border-color: #bbf7d0; background: #f0fdf4; color: #166534; }
    .bad { border-color: #fecaca; background: #fef2f2; color: #991b1b; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Register</h2>
    <form id="registerForm" novalidate>
      <label for="password">Password</label>
      <div class="row">
        <input type="password" id="password" autocomplete="new-password" required />
        <span class="toggle" data-target="password">Show</span>
      </div>
      <div class="hints">Must satisfy all rules below.</div>

      <label for="confirmPassword">Confirm Password</label>
      <div class="row">
        <input type="password" id="confirmPassword" autocomplete="new-password" required />
        <span class="toggle" data-target="confirmPassword">Show</span>
      </div>

      <div class="grid" id="liveChips">
        <div class="chip" id="lenChip">8–15 chars</div>
        <div class="chip" id="upperChip">A–Z</div>
        <div class="chip" id="lowerChip">a–z</div>
        <div class="chip" id="numChip">0–9</div>
        <div class="chip" id="specChip">@$!%*?&</div>
        <div class="chip" id="matchChip">Match</div>
      </div>

      <button type="submit">Register</button>
      <p id="message" role="status" aria-live="polite"></p>

      <details class="hints">
        <summary>Password Rules</summary>
        <ul class="rules">
          <li>At least 8 characters and at most 15 characters.</li>
          <li>At least one uppercase letter (A–Z).</li>
          <li>At least one lowercase letter (a–z).</li>
          <li>At least one number (0–9).</li>
          <li>At least one special character from: <code>@$!%*?&</code>.</li>
          <li>Confirm password must exactly match.</li>
        </ul>
      </details>
    </form>
  </div>

  <script>
    const form = document.getElementById('registerForm');
    const pwd = document.getElementById('password');
    const cpw = document.getElementById('confirmPassword');
    const message = document.getElementById('message');

    const chips = {
      len: document.getElementById('lenChip'),
      upper: document.getElementById('upperChip'),
      lower: document.getElementById('lowerChip'),
      num: document.getElementById('numChip'),
      spec: document.getElementById('specChip'),
      match: document.getElementById('matchChip')
    };

    function setChip(el, ok) {
      el.classList.remove('ok','bad');
      el.classList.add(ok ? 'ok' : 'bad');
    }

    function validate(password, confirmPassword) {
      if (password.length < 8) return 'Password must be at least 8 characters.';
      if (password.length > 15) return 'Password must not exceed 15 characters.';
      if (!/[A-Z]/.test(password)) return 'Password must contain at least one uppercase letter.';
      if (!/[a-z]/.test(password)) return 'Password must contain at least one lowercase letter.';
      if (!/[0-9]/.test(password)) return 'Password must contain at least one number.';
      if (!/[@$!%*?&]/.test(password)) return 'Password must contain at least one special character (@$!%*?&).';
      if (password !== confirmPassword) return 'Passwords do not match.';
      return 'Registration successful!';
    }

    function updateLiveChips() {
      const p = pwd.value;
      const c = cpw.value;
      setChip(chips.len, p.length >= 8 && p.length <= 15);
      setChip(chips.upper, /[A-Z]/.test(p));
      setChip(chips.lower, /[a-z]/.test(p));
      setChip(chips.num, /[0-9]/.test(p));
      setChip(chips.spec, /[@$!%*?&]/.test(p));
      setChip(chips.match, p.length > 0 && p === c);
    }

    pwd.addEventListener('input', updateLiveChips);
    cpw.addEventListener('input', updateLiveChips);

    document.querySelectorAll('.toggle').forEach(t => {
      t.addEventListener('click', () => {
        const target = document.getElementById(t.dataset.target);
        const type = target.getAttribute('type') === 'password' ? 'text' : 'password';
        target.setAttribute('type', type);
        t.textContent = type === 'password' ? 'Show' : 'Hide';
      });
    });

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      const result = validate(pwd.value, cpw.value);
      message.textContent = result;
      message.className = result === 'Registration successful!' ? 'success' : 'error';
    });

    updateLiveChips();
  </script>
</body>
</html>
